!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("marked"),require("@angular/platform-browser"),require("@angular/common"),require("prismjs")):"function"==typeof define&&define.amd?define("ngx-md",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","marked","@angular/platform-browser","@angular/common","prismjs"],e):e(t["ngx-md"]={},t.ng.core,t.ng.common.http,t.rxjs,t.rxjs.operators,t.marked,t.ng.platformBrowser,t.ng.common,t.Prism)}(this,function(t,n,e,i,r,o,s,a,p){"use strict";var c=function(){function t(t,e){this._http=t,this._domSanitizer=e,this._renderer=new o.Renderer,this.extendRenderer(),this.setMarkedOptions({})}return t.prototype.getContent=function(t){var e=this;return this._http.get(t,{responseType:"text"}).pipe(r.map(function(t){return e.extractData(t)}),r.catchError(this.handleError))},Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),t.prototype.extractData=function(t){return t||""},t.prototype.setMarkedOptions=function(t){(t=Object.assign({gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1},t)).renderer=this._renderer,o.setOptions(t)},t.prototype.compile=function(t,e){return void 0===e&&(e=!0),this._domSanitizer.sanitize(e?n.SecurityContext.HTML:n.SecurityContext.NONE,o.parse(t).trim())},t.prototype.handleError=function(t){var e;if(t instanceof fetch){var r=t.json()||"",n=r.error||JSON.stringify(r);e=t.status+" - "+(t.statusText||"")+" "+n}else e=t.message?t.message:t.toString();return i.throwError(e)},t.prototype.extendRenderer=function(){this._renderer.listitem=function(t){return/^\s*\[[x ]\]\s*/.test(t)?'<li style="list-style: none">'+(t=t.replace(/^\s*\[ \]\s*/,'<input type="checkbox" class="md-checkbox" disabled> ').replace(/^\s*\[x\]\s*/,'<input type="checkbox" class="md-checkbox" checked disabled> '))+"</li>":"<li>"+t+"</li>"}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.HttpClient},{type:s.DomSanitizer}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(e.HttpClient),n.inject(s.DomSanitizer))},token:t,providedIn:"root"}),t}(),u=function(){function t(t,e,r){this._mdService=t,this._el=e,this.platformId=r,this.changeLog=[],this.errror=new n.EventEmitter,this.loaded=new n.EventEmitter,this.sanitizeHtml=!0}return Object.defineProperty(t.prototype,"path",{set:function(t){t&&(this._path=t,this.onPathChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{set:function(t){t&&(this._data=t,this.onDataChange(t))},enumerable:!0,configurable:!0}),t.prototype.onDataChange=function(t){this._el.nativeElement.innerHTML=t?this._mdService.compile(t,this.sanitizeHtml):"",this.highlightContent(!1)},t.prototype.ngAfterViewInit=function(){this._path?this.onPathChange():this._data||this.processRaw()},t.prototype.processRaw=function(){this._md=this.prepare(function r(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value}(this._el.nativeElement.innerHTML)),this._el.nativeElement.innerHTML=this._mdService.compile(this._md,this.sanitizeHtml),this.highlightContent(!1)},t.prototype.onPathChange=function(){var e=this;this._ext=this._path&&this._path.split(".").splice(-1).join(),this._mdService.getContent(this._path).pipe(r.catchError(this.handleError)).subscribe(function(t){e.loaded.emit(t),e._md="md"!==e._ext?"```"+e._ext+"\n"+t+"\n```":t,e._el.nativeElement.innerHTML=e._mdService.compile(e.prepare(e._md),e.sanitizeHtml),e.highlightContent(!1)})},t.prototype.handleError=function(t){return this.errror.emit(t),console.error("An error occurred",t),t.message||t},t.prototype.prepare=function(t){var e=this;if(!t)return"";if("md"!==this._ext&&this.path)return t.replace(/\"/g,"'");var r=!1;return t.split("\n").map(function(t){return"```"===e.trimLeft(t).substring(0,3)&&(r=!r),r?t:t.trim()}).join("\n")},t.prototype.trimLeft=function(t){return t.replace(/^\s+|\s+$/g,"")},t.prototype.highlightContent=function(t){a.isPlatformBrowser(this.platformId)&&p.highlightAll(t)},t.decorators=[{type:n.Component,args:[{selector:"markdown,[Markdown],ngx-md,[NgxMd]",template:"<ng-content></ng-content>",styles:[".token.operator, .token.entity, .token.url, .language-css .token.string, .style .token.string {\n            background: none;\n        }\n        .md-checkbox{\n            vertical-align: middle; margin: 0 0.2em 0.25em -1.6em; font-size: 16px;\n        }"]}]}],t.ctorParameters=function(){return[{type:c},{type:n.ElementRef},{type:String,decorators:[{type:n.Inject,args:[n.PLATFORM_ID]}]}]},t.propDecorators={path:[{type:n.Input}],data:[{type:n.Input}],sanitizeHtml:[{type:n.Input}]},t}();var h=function(){function t(){}return t.decorators=[{type:n.Injectable}],t}(),l=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[h]}},t.decorators=[{type:n.NgModule,args:[{imports:[e.HttpClientModule],declarations:[u],providers:[c],exports:[u]}]}],t}();t.NgxMdService=c,t.NgxMdComponent=u,t.NgxMdModule=l,t.Éµa=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-md.umd.min.js.map