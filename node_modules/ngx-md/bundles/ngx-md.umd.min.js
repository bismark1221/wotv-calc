!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("marked"),require("@angular/platform-browser"),require("@angular/common"),require("prismjs")):"function"==typeof define&&define.amd?define("ngx-md",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","marked","@angular/platform-browser","@angular/common","prismjs"],t):t((e=e||self)["ngx-md"]={},e.ng.core,e.ng.common.http,e.rxjs,e.rxjs.operators,e.marked,e.ng.platformBrowser,e.ng.common,e.prismjs)}(this,(function(e,t,r,n,o,i,s,a,p){"use strict";var c=function(){function e(e,t){this._http=e,this._domSanitizer=t,this._renderer=new i.Renderer,this.extendRenderer(),this.setMarkedOptions({})}return e.prototype.getContent=function(e){var t=this;return this._http.get(e,{responseType:"text"}).pipe(o.map((function(e){return t.extractData(e)})),o.catchError(this.handleError))},Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),e.prototype.extractData=function(e){return e||""},e.prototype.setMarkedOptions=function(e){(e=Object.assign({gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1},e)).renderer=this._renderer,i.setOptions(e)},e.prototype.compile=function(e,r){return void 0===r&&(r=!0),this._domSanitizer.sanitize(r?t.SecurityContext.HTML:t.SecurityContext.NONE,i.parse(e).trim())},e.prototype.handleError=function(e){var t=e.message?e.message:e.toString();return n.throwError(t)},e.prototype.extendRenderer=function(){this._renderer.listitem=function(e){return/^\s*\[[x ]\]\s*/.test(e)?'<li style="list-style: none">'+(e=e.replace(/^\s*\[ \]\s*/,'<input type="checkbox" class="md-checkbox" disabled> ').replace(/^\s*\[x\]\s*/,'<input type="checkbox" class="md-checkbox" checked disabled> '))+"</li>":"<li>"+e+"</li>"}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:r.HttpClient},{type:s.DomSanitizer}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(r.HttpClient),t.ɵɵinject(s.DomSanitizer))},token:e,providedIn:"root"}),e}();var u=function(){function e(e,r,n){this._mdService=e,this._el=r,this.platformId=n,this.changeLog=[],this.error=new t.EventEmitter,this.loaded=new t.EventEmitter,this.sanitizeHtml=!0}return Object.defineProperty(e.prototype,"path",{set:function(e){e&&(this._path=e,this.onPathChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){e&&(this._data=e,this.onDataChange(e))},enumerable:!0,configurable:!0}),e.prototype.onDataChange=function(e){this._el.nativeElement.innerHTML=e?this._mdService.compile(e,this.sanitizeHtml):"",this.highlightContent(!1)},e.prototype.ngAfterViewInit=function(){this._path?this.onPathChange():this._data||this.processRaw()},e.prototype.processRaw=function(){var e,t;this._md=this.prepare((e=this._el.nativeElement.innerHTML,(t=document.createElement("textarea")).innerHTML=e,t.value)),this._el.nativeElement.innerHTML=this._mdService.compile(this._md,this.sanitizeHtml),this.highlightContent(!1)},e.prototype.onPathChange=function(){var e=this;this._ext=this._path&&this._path.split(".").splice(-1).join(),this._mdService.getContent(this._path).pipe(o.catchError(this.handleError)).subscribe((function(t){e.loaded.emit(t),e._md="md"!==e._ext?"```"+e._ext+"\n"+t+"\n```":t,e._el.nativeElement.innerHTML=e._mdService.compile(e.prepare(e._md),e.sanitizeHtml),e.highlightContent(!1)}))},e.prototype.handleError=function(e){return this.error.emit(e),console.error("An error occurred",e),e.message||e},e.prototype.prepare=function(e){var t=this;if(!e)return"";if("md"===this._ext||!this.path){var r=!1;return e.split("\n").map((function(e){return"```"===t.trimLeft(e).substring(0,3)&&(r=!r),r?e:e.trim()})).join("\n")}return e.replace(/\"/g,"'")},e.prototype.trimLeft=function(e){return e.replace(/^\s+|\s+$/g,"")},e.prototype.highlightContent=function(e){a.isPlatformBrowser(this.platformId)&&p.highlightAll(e)},e.decorators=[{type:t.Component,args:[{selector:"markdown,[Markdown],ngx-md,[NgxMd]",template:"<ng-content></ng-content>",styles:["\n      .token.operator,\n      .token.entity,\n      .token.url,\n      .language-css .token.string,\n      .style .token.string {\n        background: none;\n      }\n      .md-checkbox {\n        vertical-align: middle;\n        margin: 0 0.2em 0.25em -1.6em;\n        font-size: 16px;\n      }\n    "]}]}],e.ctorParameters=function(){return[{type:c},{type:t.ElementRef},{type:String,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.propDecorators={error:[{type:t.Output}],loaded:[{type:t.Output}],path:[{type:t.Input}],data:[{type:t.Input}],sanitizeHtml:[{type:t.Input}]},e}();var h=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),l=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[h]}},e.decorators=[{type:t.NgModule,args:[{imports:[a.CommonModule],declarations:[u],providers:[c],exports:[u]}]}],e}();e.NgxMdComponent=u,e.NgxMdModule=l,e.NgxMdService=c,e.ɵa=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-md.umd.min.js.map