!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("marked"),require("@angular/common"),require("prismjs")):"function"==typeof define&&define.amd?define("ngx-md",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","marked","@angular/common","prismjs"],t):t(e["ngx-md"]={},e.ng.core,e.ng.common.http,null,e.Rx.Observable.prototype,null,e.ng.common,null)}(this,function(e,t,n,i,r,o,s,a){"use strict";var p=function(){function e(e){this._http=e,this._renderer=new o.Renderer,this.extendRenderer(),this.setMarkedOptions({})}return e.prototype.getContent=function(e){return this._http.get(e,{responseType:"text"}).pipe(r.map(function(e){return e})).pipe(r.catchError(this.handleError))},Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),e.prototype.setMarkedOptions=function(e){(e=Object.assign({gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1},e)).renderer=this._renderer,o.setOptions(e)},e.prototype.compile=function(e){return o.parse(e)},e.prototype.handleError=function(e){var t;if(e instanceof fetch){var n=e.json()||"",r=n.error||JSON.stringify(n);t=e.status+" - "+(e.statusText||"")+" "+r}else t=e.message?e.message:e.toString();return i.throwError(t)},e.prototype.extendRenderer=function(){this._renderer.listitem=function(e){return/^\s*\[[x ]\]\s*/.test(e)?'<li style="list-style: none">'+(e=e.replace(/^\s*\[ \]\s*/,'<input type="checkbox" style=" vertical-align: middle; margin: 0 0.2em 0.25em -1.6em; font-size: 16px; " disabled> ').replace(/^\s*\[x\]\s*/,'<input type="checkbox" style=" vertical-align: middle; margin: 0 0.2em 0.25em -1.6em; font-size: 16px; " checked disabled> '))+"</li>":"<li>"+e+"</li>"}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.HttpClient}]},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e(t.inject(n.HttpClient))},token:e,providedIn:"root"}),e}(),c=function(){function e(e,t,n){this._mdService=e,this._el=t,this._platformId=n}return Object.defineProperty(e.prototype,"path",{set:function(e){e&&(this._path=e,this.onPathChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){e&&(this._data=e,this.onDataChange(e))},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this._md=this._mdService.compile(this._el.nativeElement.innerHTML),this._el.nativeElement.innerHTML=this._mdService.compile(this._md),this.highlightContent(!1)},e.prototype.onDataChange=function(e){e?(this._md=this.prepare(l(e)),this._md=this._mdService.compile(e),this._el.nativeElement.innerHTML=this._mdService.compile(this._md)):this._el.nativeElement.innerHTML="",this.highlightContent(!1)},e.prototype.onPathChange=function(){var t=this;this._ext=this._path&&this._path.split(".").splice(-1).join(),this._mdService.getContent(this._path).subscribe(function(e){t._md="md"!==t._ext?"```"+t._ext+"\n"+e+"\n```":e,t._el.nativeElement.innerHTML=t._mdService.compile(t.prepare(t._md)),t.highlightContent(!1)})},e.prototype.handleError=function(e){return console.error("An error occurred",e),Promise.reject(e.message||e)},e.prototype.processRaw=function(e){this._md=this.prepare(l(this._el.nativeElement.innerHTML)),this._el.nativeElement.innerHTML=this._mdService.compile(this._md),this.highlightContent(!1)},e.prototype.prepare=function(e){var t=this;if(!e)return"";if("md"===this._ext||!this.path){var n=!1;return e.split("\n").map(function(e){return"```"===t.trimLeft(e).substring(0,3)&&(n=!n),n?e:e.trim()}).join("\n")}return e.replace(/\"/g,"'")},e.prototype.trimLeft=function(e){return e.replace(/^\s+|\s+$/g,"")},e.prototype.highlightContent=function(e){s.isPlatformBrowser(this._platformId)&&a.highlightAll(e)},e.decorators=[{type:t.Component,args:[{selector:"ngx-md, markdown, [Markdown],[NgxMd]",template:"<ng-content></ng-content>",styles:[".token.operator, .token.entity, .token.url, .language-css .token.string, .style .token.string {\n            background: none;\n        }"]}]}],e.ctorParameters=function(){return[{type:p},{type:t.ElementRef},{type:undefined,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.propDecorators={path:[{type:t.Input}],data:[{type:t.Input}]},e}();function l(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}var u=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),d=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[u]}},e.decorators=[{type:t.NgModule,args:[{imports:[n.HttpClientModule],declarations:[c],providers:[p],exports:[c]}]}],e}();e.NgxMdService=p,e.NgxMdComponent=c,e.NgxMdModule=d,e.NgxMdConfig=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-md.umd.min.js.map