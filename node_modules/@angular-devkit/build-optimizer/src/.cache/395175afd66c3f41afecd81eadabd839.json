{"remainingRequest":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/data/www/ffbe-chain/node_modules/angulartics2/dist/core/angulartics2.js","dependencies":[{"path":"/data/www/ffbe-chain/node_modules/angulartics2/dist/core/angulartics2.js","mtime":1529481785430},{"path":"/data/www/ffbe-chain/node_modules/cache-loader/dist/cjs.js","mtime":1529481786296},{"path":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1529481776533}],"contextDependencies":[],"result":["import { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs/ReplaySubject';\nimport { Location } from '@angular/common';\nimport { Router, NavigationEnd } from '@angular/router';\nimport 'rxjs/add/operator/filter';\nvar Angulartics2 = /** @class */ /*@__PURE__*/ (function () {\n    function Angulartics2(location, router) {\n        this.settings = {\n            pageTracking: {\n                autoTrackVirtualPages: true,\n                basePath: '',\n                excludedRoutes: []\n            },\n            eventTracking: {},\n            developerMode: false\n        };\n        /*\n          @Param: ({url: string, location: Location})\n         */\n        this.pageTrack = new ReplaySubject(10);\n        /*\n          @Param: ({action: any, properties: any})\n         */\n        this.eventTrack = new ReplaySubject(10);\n        /*\n          @Param: (properties: any)\n         */\n        this.exceptionTrack = new ReplaySubject(10);\n        /*\n          @Param: (alias: string)\n         */\n        this.setAlias = new ReplaySubject(10);\n        /*\n          @Param: (userId: string)\n         */\n        this.setUsername = new ReplaySubject(10);\n        /*\n          @Param: ({action: any, properties: any})\n         */\n        this.setUserProperties = new ReplaySubject(10);\n        /*\n          @Param: (properties: any)\n         */\n        this.setUserPropertiesOnce = new ReplaySubject(10);\n        /*\n          @Param: (properties: any)\n         */\n        this.setSuperProperties = new ReplaySubject(10);\n        /*\n          @Param: (properties: any)\n         */\n        this.setSuperPropertiesOnce = new ReplaySubject(10);\n        /*\n          @Param: (properties: any)\n         */\n        this.userTimings = new ReplaySubject(10);\n        this.trackLocation(location, router);\n    }\n    Angulartics2.prototype.trackLocation = function (location, router) {\n        var _this = this;\n        router.events\n            .filter(function (event) { return event instanceof NavigationEnd; })\n            .subscribe(function (event) {\n            if (!_this.settings.developerMode) {\n                _this.trackUrlChange(event.urlAfterRedirects, location);\n            }\n        });\n    };\n    Angulartics2.prototype.virtualPageviews = function (value) {\n        this.settings.pageTracking.autoTrackVirtualPages = value;\n    };\n    Angulartics2.prototype.excludeRoutes = function (routes) {\n        this.settings.pageTracking.excludedRoutes = routes;\n    };\n    Angulartics2.prototype.firstPageview = function (value) {\n        this.settings.pageTracking.autoTrackFirstPage = value;\n    };\n    Angulartics2.prototype.withBase = function (value) {\n        this.settings.pageTracking.basePath = (value);\n    };\n    Angulartics2.prototype.developerMode = function (value) {\n        this.settings.developerMode = value;\n    };\n    Angulartics2.prototype.trackUrlChange = function (url, location) {\n        if (!this.settings.developerMode) {\n            if (this.settings.pageTracking.autoTrackVirtualPages && !this.matchesExcludedRoute(url)) {\n                this.pageTrack.next({\n                    path: this.settings.pageTracking.basePath.length ? this.settings.pageTracking.basePath + url : location.prepareExternalUrl(url),\n                    location: location\n                });\n            }\n        }\n    };\n    Angulartics2.prototype.matchesExcludedRoute = function (url) {\n        for (var _i = 0, _a = this.settings.pageTracking.excludedRoutes; _i < _a.length; _i++) {\n            var excludedRoute = _a[_i];\n            if ((excludedRoute instanceof RegExp && excludedRoute.test(url)) || url.indexOf(excludedRoute) > -1) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return Angulartics2;\n}());\nexport { Angulartics2 };\n",null]}