{"remainingRequest":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/data/www/ffbe-chain/node_modules/angulartics2/dist/es5/providers/appinsights/angulartics2-appinsights.js","dependencies":[{"path":"/data/www/ffbe-chain/node_modules/angulartics2/dist/es5/providers/appinsights/angulartics2-appinsights.js","mtime":1529481785437},{"path":"/data/www/ffbe-chain/node_modules/cache-loader/dist/cjs.js","mtime":1529481786296},{"path":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1529481776533}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@angular/core\");\nvar angulartics2_1 = require(\"../../core/angulartics2\");\nvar platform_browser_1 = require(\"@angular/platform-browser\");\nvar router_1 = require(\"@angular/router\");\nvar Angulartics2AppInsights = /** @class */ /*@__PURE__*/ (function () {\n    function Angulartics2AppInsights(angulartics2, title, router) {\n        var _this = this;\n        this.angulartics2 = angulartics2;\n        this.title = title;\n        this.router = router;\n        this.loadStartTime = null;\n        this.loadTime = null;\n        this.metrics = null;\n        this.dimensions = null;\n        this.measurements = null;\n        if (typeof (appInsights) === 'undefined') {\n            console.warn('appInsights not found');\n        }\n        this.angulartics2.settings.appInsights = {\n            userId: null\n        };\n        this.angulartics2.pageTrack.subscribe(function (x) { return _this.pageTrack(x.path); });\n        this.angulartics2.eventTrack.subscribe(function (x) { return _this.eventTrack(x.action, x.properties); });\n        this.angulartics2.exceptionTrack.subscribe(function (x) { return _this.exceptionTrack(x); });\n        this.angulartics2.setUsername.subscribe(function (x) { return _this.setUsername(x); });\n        this.angulartics2.setUserProperties.subscribe(function (x) { return _this.setUserProperties(x); });\n        this.router.events\n            .filter(function (event) { return event instanceof router_1.NavigationStart; })\n            .subscribe(function (event) { return _this.startTimer(); });\n        this.router.events\n            .filter(function (event) {\n            return (event instanceof router_1.NavigationError) ||\n                (event instanceof router_1.NavigationEnd);\n        })\n            .subscribe(function (error) { return _this.stopTimer(); });\n    }\n    Angulartics2AppInsights.prototype.startTimer = function () {\n        this.loadStartTime = Date.now();\n        this.loadTime = null;\n    };\n    Angulartics2AppInsights.prototype.stopTimer = function () {\n        this.loadTime = Date.now() - this.loadStartTime;\n        this.loadStartTime = null;\n    };\n    /**\n     * Page Track in Baidu Analytics\n     * @name pageTrack\n     *\n     * @param {string} path Required 'path' (string)\n     *\n     * @link https://github.com/Microsoft/ApplicationInsights-JS/blob/master/API-reference.md#trackpageview\n     *\n     */\n    Angulartics2AppInsights.prototype.pageTrack = function (path) {\n        appInsights.trackPageView(this.title.getTitle(), path, this.dimensions, this.metrics, this.loadTime);\n    };\n    /**\n     * Log a user action or other occurrence.\n     * @param   name    A string to identify this event in the portal.\n     *\n     * @param   properties  map[string, string] - additional data used to filter events and metrics in the portal. Defaults to empty.\n     *\n     * @https://github.com/Microsoft/ApplicationInsights-JS/blob/master/API-reference.md#trackevent\n     */\n    Angulartics2AppInsights.prototype.eventTrack = function (name, properties) {\n        appInsights.trackEvent(name, properties, this.measurements);\n    };\n    /**\n     * Exception Track Event in GA\n     * @name exceptionTrack\n     *\n     * @param {any} properties Comprised of the mandatory fields 'appId' (string), 'appName' (string) and 'appVersion' (string) and\n     * optional  fields 'fatal' (boolean) and 'description' (string), error\n     *\n     * @link https://github.com/Microsoft/ApplicationInsights-JS/blob/master/API-reference.md#trackexception\n     */\n    Angulartics2AppInsights.prototype.exceptionTrack = function (properties) {\n        var description = properties.event || properties.description || properties;\n        appInsights.trackException(description);\n    };\n    /**\n     *\n     * @param userId\n     *\n     * @link https://github.com/Microsoft/ApplicationInsights-JS/blob/master/API-reference.md#setauthenticatedusercontext\n     */\n    Angulartics2AppInsights.prototype.setUsername = function (userId) {\n        this.angulartics2.settings.appInsights.userId = userId;\n        appInsights.setAuthenticatedUserContext(userId);\n    };\n    Angulartics2AppInsights.prototype.setUserProperties = function (properties) {\n        if (properties.userId) {\n            this.angulartics2.settings.appInsights.userId = properties.userId;\n        }\n        if (properties.accountId) {\n            appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId, properties.accountId);\n        }\n    };\n    Angulartics2AppInsights.decorators = [\n        { type: core_1.Injectable },\n    ];\n    return Angulartics2AppInsights;\n}());\nexports.Angulartics2AppInsights = Angulartics2AppInsights;\n",null]}