{"remainingRequest":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/data/www/ffbe-chain/node_modules/angular2-lightbox/lightbox-overlay.component.js","dependencies":[{"path":"/data/www/ffbe-chain/node_modules/angular2-lightbox/lightbox-overlay.component.js","mtime":1529481785385},{"path":"/data/www/ffbe-chain/node_modules/cache-loader/dist/cjs.js","mtime":1529481786296},{"path":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1529481776533}],"contextDependencies":[],"result":["\"use strict\";\nvar __decorate = /*@__PURE__*/ require(\"tslib\").__decorate;\nvar __metadata = /*@__PURE__*/ require(\"tslib\").__metadata;\nvar __param = /*@__PURE__*/ require(\"tslib\").__param;\nvar core_1 = require(\"@angular/core\");\nvar platform_browser_1 = require(\"@angular/platform-browser\");\nvar lightbox_event_service_1 = require(\"./lightbox-event.service\");\nvar LightboxOverlayComponent = /*@__PURE__*/ (function () {\n    function LightboxOverlayComponent(_elemRef, _rendererRef, _lightboxEvent, _documentRef) {\n        var _this = this;\n        this._elemRef = _elemRef;\n        this._rendererRef = _rendererRef;\n        this._lightboxEvent = _lightboxEvent;\n        this._documentRef = _documentRef;\n        this._classList = 'lightboxOverlay animation fadeInOverlay';\n        this._subscription = this._lightboxEvent.lightboxEvent$.subscribe(function (event) { return _this._onReceivedEvent(event); });\n    }\n    LightboxOverlayComponent.prototype.ngAfterViewInit = function () {\n        var fadeDuration = this.options.fadeDuration;\n        this._rendererRef.setElementStyle(this._elemRef.nativeElement, '-webkit-animation-duration', fadeDuration + \"s\");\n        this._rendererRef.setElementStyle(this._elemRef.nativeElement, 'animation-duration', fadeDuration + \"s\");\n        this._sizeOverlay();\n    };\n    LightboxOverlayComponent.prototype.close = function () {\n        // broadcast to itself and all others subscriber including the components\n        this._lightboxEvent.broadcastLightboxEvent({ id: lightbox_event_service_1.LIGHTBOX_EVENT.CLOSE, data: null });\n    };\n    LightboxOverlayComponent.prototype.onResize = function () {\n        this._sizeOverlay();\n    };\n    LightboxOverlayComponent.prototype.ngOnDestroy = function () {\n        this._subscription.unsubscribe();\n    };\n    LightboxOverlayComponent.prototype._sizeOverlay = function () {\n        var width = this._getOverlayWidth();\n        var height = this._getOverlayHeight();\n        this._rendererRef.setElementStyle(this._elemRef.nativeElement, 'width', width + \"px\");\n        this._rendererRef.setElementStyle(this._elemRef.nativeElement, 'height', height + \"px\");\n    };\n    LightboxOverlayComponent.prototype._onReceivedEvent = function (event) {\n        switch (event.id) {\n            case lightbox_event_service_1.LIGHTBOX_EVENT.CLOSE:\n                this._end();\n                break;\n            default:\n                break;\n        }\n    };\n    LightboxOverlayComponent.prototype._end = function () {\n        var _this = this;\n        this._classList = 'lightboxOverlay animation fadeOutOverlay';\n        // queue self destruction after the animation has finished\n        // FIXME: not sure if there is any way better than this\n        setTimeout(function () {\n            _this.cmpRef.destroy();\n        }, this.options.fadeDuration * 1000);\n    };\n    LightboxOverlayComponent.prototype._getOverlayWidth = function () {\n        return Math.max(this._documentRef.body.scrollWidth, this._documentRef.body.offsetWidth, this._documentRef.documentElement.clientWidth, this._documentRef.documentElement.scrollWidth, this._documentRef.documentElement.offsetWidth);\n    };\n    LightboxOverlayComponent.prototype._getOverlayHeight = function () {\n        return Math.max(this._documentRef.body.scrollHeight, this._documentRef.body.offsetHeight, this._documentRef.documentElement.clientHeight, this._documentRef.documentElement.scrollHeight, this._documentRef.documentElement.offsetHeight);\n    };\n    return LightboxOverlayComponent;\n}());\n__decorate([\n    core_1.Input(),\n    __metadata(\"design:type\", Object)\n], LightboxOverlayComponent.prototype, \"options\", void 0);\n__decorate([\n    core_1.Input(),\n    __metadata(\"design:type\", Object)\n], LightboxOverlayComponent.prototype, \"cmpRef\", void 0);\n__decorate([\n    core_1.HostListener('window:resize'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], LightboxOverlayComponent.prototype, \"onResize\", null);\nLightboxOverlayComponent = __decorate([\n    core_1.Component({\n        selector: '[lb-overlay]',\n        template: '',\n        host: {\n            '(click)': 'close()',\n            '[class]': '_classList'\n        }\n    }),\n    __param(3, core_1.Inject(platform_browser_1.DOCUMENT))\n], LightboxOverlayComponent);\nexports.LightboxOverlayComponent = LightboxOverlayComponent;\n",null]}