{"remainingRequest":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/data/www/ffbe-chain/node_modules/angulartics2/dist/es5/providers/piwik/angulartics2-piwik.js","dependencies":[{"path":"/data/www/ffbe-chain/node_modules/angulartics2/dist/es5/providers/piwik/angulartics2-piwik.js","mtime":1529481785448},{"path":"/data/www/ffbe-chain/node_modules/cache-loader/dist/cjs.js","mtime":1529481786296},{"path":"/data/www/ffbe-chain/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1529481776533}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@angular/core\");\nvar angulartics2_1 = require(\"../../core/angulartics2\");\nvar Angulartics2Piwik = /** @class */ /*@__PURE__*/ (function () {\n    function Angulartics2Piwik(angulartics2) {\n        var _this = this;\n        this.angulartics2 = angulartics2;\n        if (typeof (_paq) === 'undefined') {\n            console.warn('Piwik not found');\n        }\n        this.angulartics2.pageTrack.subscribe(function (x) { return _this.pageTrack(x.path, x.location); });\n        this.angulartics2.eventTrack.subscribe(function (x) { return _this.eventTrack(x.action, x.properties); });\n        this.angulartics2.setUsername.subscribe(function (x) { return _this.setUsername(x); });\n        this.angulartics2.setUserProperties.subscribe(function (x) { return _this.setUserProperties(x); });\n    }\n    Angulartics2Piwik.prototype.pageTrack = function (path, location) {\n        try {\n            _paq.push(['setDocumentTitle', window.document.title]);\n            _paq.push(['setCustomUrl', path]);\n            _paq.push(['trackPageView']);\n        }\n        catch (e) {\n            if (!(e instanceof ReferenceError)) {\n                throw e;\n            }\n        }\n    };\n    Angulartics2Piwik.prototype.eventTrack = function (action, properties) {\n        try {\n            if (properties.value) {\n                var parsed = parseInt(properties.value, 10);\n                properties.value = isNaN(parsed) ? 0 : parsed;\n            }\n            _paq.push(['trackEvent', properties.category, action, properties.label, properties.value]);\n        }\n        catch (e) {\n            if (!(e instanceof ReferenceError)) {\n                throw e;\n            }\n        }\n    };\n    Angulartics2Piwik.prototype.setUsername = function (userId) {\n        try {\n            _paq.push(['setUserId', userId]);\n        }\n        catch (e) {\n            if (!(e instanceof ReferenceError)) {\n                throw e;\n            }\n        }\n    };\n    /**\n     * Sets custom dimensions if at least one property has the key \"dimension<n>\",\n     * e.g. dimension10. If there are custom dimensions, any other property is ignored.\n     *\n     * If there are no custom dimensions in the given properties object, the properties\n     * object is saved as a custom variable.\n     *\n     * If in doubt, prefer custom dimensions.\n     * @see https://piwik.org/docs/custom-variables/\n     */\n    Angulartics2Piwik.prototype.setUserProperties = function (properties) {\n        try {\n            var dimensions = this.setCustomDimensions(properties);\n            if (dimensions.length === 0) {\n                _paq.push(['setCustomVariable', properties]);\n            }\n        }\n        catch (e) {\n            if (!(e instanceof ReferenceError)) {\n                throw e;\n            }\n        }\n    };\n    Angulartics2Piwik.prototype.setCustomDimensions = function (properties) {\n        var dimensionRegex = /dimension[1-9]\\d*/;\n        var dimensions = Object.keys(properties).filter(function (key) { return dimensionRegex.exec(key); });\n        dimensions.forEach(function (dimension) {\n            var number = Number(dimension.substr(9));\n            _paq.push(['setCustomDimension', number, properties[dimension]]);\n        });\n        return dimensions;\n    };\n    Angulartics2Piwik.decorators = [\n        { type: core_1.Injectable },\n    ];\n    return Angulartics2Piwik;\n}());\nexports.Angulartics2Piwik = Angulartics2Piwik;\n",null]}