{"version":3,"sources":["../../src/markdown/markdown.service.ts"],"names":[],"mappings":"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","file":"markdown.service.js","sourceRoot":"","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Http, Response} from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport * as  marked from 'marked';\n\nimport 'rxjs/add/observable/throw';\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/map';\n\n\n\n\nexport class MarkdownService {\n  private _renderer:any = new marked.Renderer();\n  constructor(private http: Http) {\n    this.extendRenderer();\n    this.setMarkedOptions({});\n  }\n\n  //get the content from remote resource\n  getContent(path: string):Observable<any> {\n    return this.http.get(path)\n       .map(this.extractData)\n       .catch(this.handleError);\n   }\n\n   public get renderer() {\n     return this._renderer;\n   }\n\n   // handle data\n   public extractData(res: Response): string {\n     return res.text() || '';\n   }\n\n\n   public setMarkedOptions(options: any) {\n     options = Object.assign({\n       gfm: true,\n       tables: true,\n       breaks: false,\n       pedantic: false,\n       sanitize: false,\n       smartLists: true,\n       smartypants: false\n     }, options);\n     options.renderer = this._renderer;\n     marked.setOptions(options);\n   }\n\n   // comple markdown to html\n   public compile(data:string) {\n      return marked(data);\n   }\n\n   //handle error\n   private handleError(error: Response | any):any {\n     let errMsg: string;\n     if (error instanceof Response) {\n       const body = error.json() || '';\n       const err = body.error || JSON.stringify(body);\n       errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n     } else {\n       errMsg = error.message ? error.message : error.toString();\n     }\n     console.error(errMsg);\n     return Observable.throw(errMsg);\n   }\n\n   // extend marked render to support todo checkbox\n   private extendRenderer() {\n     this._renderer.listitem = function(text:string) {\n      if (/^\\s*\\[[x ]\\]\\s*/.test(text)) {\n      text = text\n        .replace(/^\\s*\\[ \\]\\s*/, '<input type=\"checkbox\" style=\" vertical-align: middle; margin: 0 0.2em 0.25em -1.6em; font-size: 16px; \" disabled> ')\n        .replace(/^\\s*\\[x\\]\\s*/, '<input type=\"checkbox\" style=\" vertical-align: middle; margin: 0 0.2em 0.25em -1.6em; font-size: 16px; \" checked disabled> ');\n          return '<li style=\"list-style: none\">' + text + '</li>';\n        } else {\n          return '<li>' + text + '</li>';\n        }\n      };\n   }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Http, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}