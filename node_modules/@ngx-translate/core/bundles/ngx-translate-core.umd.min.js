!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tslib"),require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngx-translate/core",["exports","tslib","@angular/core","rxjs","rxjs/operators"],e):e((t["ngx-translate"]=t["ngx-translate"]||{},t["ngx-translate"].core={}),t.tslib,t.ng.core,t.rxjs,t.Rx.Observable.prototype)}(this,function(t,C,o,m,T){"use strict";var n=function(){},r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C.__extends(e,t),e.prototype.getTranslation=function(t){return m.of({})},e}(n);r.decorators=[{type:o.Injectable}];var a=function(){},i=function(){function t(){}return t.prototype.handle=function(t){return t.key},t}();i.decorators=[{type:o.Injectable}];var s=function(){},u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C.__extends(e,t),e.prototype.compile=function(t,e){return t},e.prototype.compileTranslations=function(t,e){return t},e}(s);function l(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,a,i=typeof t;if(i==typeof e&&"object"==i){if(!Array.isArray(t)){if(Array.isArray(e))return!1;for(r in a=Object.create(null),t){if(!l(t[r],e[r]))return!1;a[r]=!0}for(r in e)if(!(r in a)&&"undefined"!=typeof e[r])return!1;return!0}if(!Array.isArray(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!l(t[r],e[r]))return!1;return!0}}return!1}function h(t){return null!=t}function c(t){return t&&"object"==typeof t&&!Array.isArray(t)}u.decorators=[{type:o.Injectable}];var g=function(){},f=function(e){function t(){var t=e.apply(this,C.__spread(arguments))||this;return t.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,t}return C.__extends(t,e),t.prototype.interpolate=function(t,e){return"string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t},t.prototype.getValue=function(t,e){var n=e.split(".");for(e="";e+=n.shift(),!h(t)||!h(t[e])||"object"!=typeof t[e]&&n.length?n.length?e+=".":t=undefined:(t=t[e],e=""),n.length;);return t},t.prototype.interpolateFunction=function(t,e){return t(e)},t.prototype.interpolateString=function(t,r){var a=this;return r?t.replace(this.templateMatcher,function(t,e){var n=a.getValue(r,e);return h(n)?n:t}):t},t}(g);f.decorators=[{type:o.Injectable}];var p=function(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new o.EventEmitter,this.onLangChange=new o.EventEmitter,this.onDefaultLangChange=new o.EventEmitter},d=new o.InjectionToken("USE_STORE"),y=new o.InjectionToken("USE_DEFAULT_LANG"),v=function(){function t(t,e,n,r,a,i,s){void 0===i&&(i=!0),void 0===s&&(s=!1),this.store=t,this.currentLoader=e,this.compiler=n,this.parser=r,this.missingTranslationHandler=a,this.useDefaultLang=i,this.isolate=s,this.pending=!1,this._onTranslationChange=new o.EventEmitter,this._onLangChange=new o.EventEmitter,this._onDefaultLangChange=new o.EventEmitter,this._langs=[],this._translations={},this._translationRequests={}}return Object.defineProperty(t.prototype,"onTranslationChange",{get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLangChange",{get:function(){return this.isolate?this._onLangChange:this.store.onLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDefaultLangChange",{get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultLang",{get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLang",{get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(t){this.isolate?this._currentLang=t:this.store.currentLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langs",{get:function(){return this.isolate?this._langs:this.store.langs},set:function(t){this.isolate?this._langs=t:this.store.langs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translations",{get:function(){return this.isolate?this._translations:this.store.translations},set:function(t){this.isolate?this._translations=t:this.store.translations=t},enumerable:!0,configurable:!0}),t.prototype.setDefaultLang=function(e){var n=this;if(e!==this.defaultLang){var t=this.retrieveTranslations(e);void 0!==t?(this.defaultLang||(this.defaultLang=e),t.pipe(T.take(1)).subscribe(function(t){n.changeDefaultLang(e)})):this.changeDefaultLang(e)}},t.prototype.getDefaultLang=function(){return this.defaultLang},t.prototype.use=function(e){var n=this;if(e===this.currentLang)return m.of(this.translations[e]);var t=this.retrieveTranslations(e);return void 0!==t?(this.currentLang||(this.currentLang=e),t.pipe(T.take(1)).subscribe(function(t){n.changeLang(e)}),t):(this.changeLang(e),m.of(this.translations[e]))},t.prototype.retrieveTranslations=function(t){var e;return"undefined"==typeof this.translations[t]&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e},t.prototype.getTranslation=function(e){var n=this;return this.pending=!0,this.loadingTranslations=this.currentLoader.getTranslation(e).pipe(T.share()),this.loadingTranslations.pipe(T.take(1)).subscribe(function(t){n.translations[e]=n.compiler.compileTranslations(t,e),n.updateLangs(),n.pending=!1},function(t){n.pending=!1}),this.loadingTranslations},t.prototype.setTranslation=function(t,e,n){void 0===n&&(n=!1),e=this.compiler.compileTranslations(e,t),n&&this.translations[t]?this.translations[t]=function r(a,i){var s=Object.assign({},a);return c(a)&&c(i)&&Object.keys(i).forEach(function(t){var e,n;c(i[t])?t in a?s[t]=r(a[t],i[t]):Object.assign(s,((e={})[t]=i[t],e)):Object.assign(s,((n={})[t]=i[t],n))}),s}(this.translations[t],e):this.translations[t]=e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})},t.prototype.getLangs=function(){return this.langs},t.prototype.addLangs=function(t){var e=this;t.forEach(function(t){-1===e.langs.indexOf(t)&&e.langs.push(t)})},t.prototype.updateLangs=function(){this.addLangs(Object.keys(this.translations))},t.prototype.getParsedResult=function(t,r,e){var n,a,i,s,o;if(r instanceof Array){var u={},l=!1;try{for(var h=C.__values(r),c=h.next();!c.done;c=h.next()){u[d=c.value]=this.getParsedResult(t,d,e),"function"==typeof u[d].subscribe&&(l=!0)}}catch(b){a={error:b}}finally{try{c&&!c.done&&(i=h["return"])&&i.call(h)}finally{if(a)throw a.error}}if(l){var g=void 0;try{for(var f=C.__values(r),p=f.next();!p.done;p=f.next()){var d,y="function"==typeof u[d=p.value].subscribe?u[d]:m.of(u[d]);g=void 0===g?y:m.merge(g,y)}}catch(L){s={error:L}}finally{try{p&&!p.done&&(o=f["return"])&&o.call(f)}finally{if(s)throw s.error}}return g.pipe(T.toArray(),T.map(function(t){var n={};return t.forEach(function(t,e){n[r[e]]=t}),n}))}return u}if(t&&(n=this.parser.interpolate(this.parser.getValue(t,r),e)),void 0===n&&this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(n=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],r),e)),void 0===n){var v={key:r,translateService:this};void 0!==e&&(v.interpolateParams=e),n=this.missingTranslationHandler.handle(v)}return void 0!==n?n:r},t.prototype.get=function(a,i){var s=this;if(!h(a)||!a.length)throw new Error('Parameter "key" required');if(this.pending)return m.Observable.create(function(e){var n=function(t){e.next(t),e.complete()},r=function(t){e.error(t)};s.loadingTranslations.subscribe(function(t){"function"==typeof(t=s.getParsedResult(s.compiler.compileTranslations(t,s.currentLang),a,i)).subscribe?t.subscribe(n,r):n(t)},r)});var t=this.getParsedResult(this.translations[this.currentLang],a,i);return"function"==typeof t.subscribe?t:m.of(t)},t.prototype.stream=function(n,r){var a=this;if(!h(n)||!n.length)throw new Error('Parameter "key" required');return m.concat(this.get(n,r),this.onLangChange.pipe(T.switchMap(function(t){var e=a.getParsedResult(t.translations,n,r);return"function"==typeof e.subscribe?e:m.of(e)})))},t.prototype.instant=function(n,t){if(!h(n)||!n.length)throw new Error('Parameter "key" required');var e=this.getParsedResult(this.translations[this.currentLang],n,t);if("undefined"!=typeof e.subscribe){if(n instanceof Array){var r={};return n.forEach(function(t,e){r[n[e]]=n[e]}),r}return n}return e},t.prototype.set=function(t,e,n){void 0===n&&(n=this.currentLang),this.translations[n][t]=this.compiler.compile(e,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})},t.prototype.changeLang=function(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang||this.changeDefaultLang(t)},t.prototype.changeDefaultLang=function(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})},t.prototype.reloadLang=function(t){return this.resetLang(t),this.getTranslation(t)},t.prototype.resetLang=function(t){this._translationRequests[t]=undefined,this.translations[t]=undefined},t.prototype.getBrowserLang=function(){if("undefined"==typeof window||"undefined"==typeof window.navigator)return undefined;var t=window.navigator.languages?window.navigator.languages[0]:null;return-1!==(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage).indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t},t.prototype.getBrowserCultureLang=function(){if("undefined"==typeof window||"undefined"==typeof window.navigator)return undefined;var t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage},t}();v.decorators=[{type:o.Injectable}],v.ctorParameters=function(){return[{type:p},{type:n},{type:s},{type:g},{type:a},{type:undefined,decorators:[{type:o.Inject,args:[y]}]},{type:undefined,decorators:[{type:o.Inject,args:[d]}]}]};var e=function(){function t(t,e,n){var r=this;this.translateService=t,this.element=e,this._ref=n,this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(function(t){t.lang===r.translateService.currentLang&&r.checkNodes(!0,t.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(function(t){r.checkNodes(!0,t.translations)})),this.onDefaultLangChangeSub||(this.onDefaultLangChangeSub=this.translateService.onDefaultLangChange.subscribe(function(t){r.checkNodes(!0)}))}return Object.defineProperty(t.prototype,"translate",{set:function(t){t&&(this.key=t,this.checkNodes())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translateParams",{set:function(t){l(this.currentParams,t)||(this.currentParams=t,this.checkNodes(!0))},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewChecked=function(){this.checkNodes()},t.prototype.checkNodes=function(t,e){void 0===t&&(t=!1);var n=this.element.nativeElement.childNodes;n.length||(this.setContent(this.element.nativeElement,this.key),n=this.element.nativeElement.childNodes);for(var r=0;r<n.length;++r){var a=n[r];if(3===a.nodeType){var i=void 0;if(this.key)i=this.key,t&&(a.lastKey=null);else{var s=this.getContent(a),o=s.trim();o.length&&(s!==a.currentValue?(i=o,a.originalContent=this.getContent(a)):a.originalContent&&t&&(a.lastKey=null,i=a.originalContent.trim()))}this.updateValue(i,a,e)}}},t.prototype.updateValue=function(e,n,t){var r=this;if(e){if(n.lastKey===e&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;var a=function(t){t!==e&&(n.lastKey=e),n.originalContent||(n.originalContent=r.getContent(n)),n.currentValue=h(t)?t:n.originalContent||e,r.setContent(n,r.key?n.currentValue:n.originalContent.replace(e,n.currentValue)),r._ref.markForCheck()};if(h(t)){var i=this.translateService.getParsedResult(t,e,this.currentParams);"function"==typeof i.subscribe?i.subscribe(a):a(i)}else this.translateService.get(e,this.currentParams).subscribe(a)}},t.prototype.getContent=function(t){return h(t.textContent)?t.textContent:t.data},t.prototype.setContent=function(t,e){h(t.textContent)?t.textContent=e:t.data=e},t.prototype.ngOnDestroy=function(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onDefaultLangChangeSub&&this.onDefaultLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()},t}();e.decorators=[{type:o.Directive,args:[{selector:"[translate],[ngx-translate]"}]}],e.ctorParameters=function(){return[{type:v},{type:o.ElementRef},{type:o.ChangeDetectorRef}]},e.propDecorators={translate:[{type:o.Input}],translateParams:[{type:o.Input}]};var b=function(){function t(t,e){this.translate=t,this._ref=e,this.value=""}return t.prototype.updateValue=function(e,t,n){var r=this,a=function(t){r.value=t!==undefined?t:e,r.lastKey=e,r._ref.markForCheck()};if(n){var i=this.translate.getParsedResult(n,e,t);"function"==typeof i.subscribe?i.subscribe(a):a(i)}this.translate.get(e,t).subscribe(a)},t.prototype.transform=function(e){for(var n,r=this,t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(!e||0===e.length)return e;if(l(e,this.lastKey)&&l(t,this.lastParams))return this.value;if(h(t[0])&&t.length)if("string"==typeof t[0]&&t[0].length){var i=t[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{n=JSON.parse(i)}catch(s){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+t[0])}}else"object"!=typeof t[0]||Array.isArray(t[0])||(n=t[0]);return this.lastKey=e,this.lastParams=t,this.updateValue(e,n),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(t){r.lastKey&&t.lang===r.translate.currentLang&&(r.lastKey=null,r.updateValue(e,n,t.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(t){r.lastKey&&(r.lastKey=null,r.updateValue(e,n,t.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(function(){r.lastKey&&(r.lastKey=null,r.updateValue(e,n))})),this.value},t.prototype._dispose=function(){"undefined"!=typeof this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=undefined),"undefined"!=typeof this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=undefined),"undefined"!=typeof this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=undefined)},t.prototype.ngOnDestroy=function(){this._dispose()},t}();b.decorators=[{type:o.Injectable},{type:o.Pipe,args:[{name:"translate",pure:!1}]}],b.ctorParameters=function(){return[{type:v},{type:o.ChangeDetectorRef}]};var L=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.loader||{provide:n,useClass:r},t.compiler||{provide:s,useClass:u},t.parser||{provide:g,useClass:f},t.missingTranslationHandler||{provide:a,useClass:i},p,{provide:d,useValue:t.isolate},{provide:y,useValue:t.useDefaultLang},v]}},e.forChild=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.loader||{provide:n,useClass:r},t.compiler||{provide:s,useClass:u},t.parser||{provide:g,useClass:f},t.missingTranslationHandler||{provide:a,useClass:i},{provide:d,useValue:t.isolate},{provide:y,useValue:t.useDefaultLang},v]}},e}();L.decorators=[{type:o.NgModule,args:[{declarations:[b,e],exports:[b,e]}]}],t.TranslateModule=L,t.TranslateLoader=n,t.TranslateFakeLoader=r,t.USE_STORE=d,t.USE_DEFAULT_LANG=y,t.TranslateService=v,t.MissingTranslationHandler=a,t.FakeMissingTranslationHandler=i,t.TranslateParser=g,t.TranslateDefaultParser=f,t.TranslateCompiler=s,t.TranslateFakeCompiler=u,t.TranslateDirective=e,t.TranslatePipe=b,t.TranslateStore=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-translate-core.umd.min.js.map
