!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/router"),require("rxjs/operators"),require("angulartics2")):"function"==typeof define&&define.amd?define("angulartics2/appinsights",["exports","@angular/core","@angular/platform-browser","@angular/router","rxjs/operators","angulartics2"],e):e(((t=t||self).angulartics2=t.angulartics2||{},t.angulartics2.appinsights={}),t.ng.core,t.ng.platformBrowser,t.ng.router,t.rxjs.operators,t.angulartics2)}(this,(function(t,e,r,n,i,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var a=function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var o=function(){this.userId=null},u=function(){function t(t,e,r){var n=this;this.angulartics2=t,this.title=e,this.router=r,this.loadStartTime=null,this.loadTime=null,this.metrics=null,this.dimensions=null,this.measurements=null,"undefined"==typeof appInsights&&console.warn("appInsights not found");var i=new o;this.angulartics2.settings.appInsights=a(a({},i),this.angulartics2.settings.appInsights),this.angulartics2.setUsername.subscribe((function(t){return n.setUsername(t)})),this.angulartics2.setUserProperties.subscribe((function(t){return n.setUserProperties(t)}))}return t.prototype.startTracking=function(){var t=this;this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe((function(e){return t.pageTrack(e.path)})),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe((function(e){return t.eventTrack(e.action,e.properties)})),this.angulartics2.exceptionTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe((function(e){return t.exceptionTrack(e)})),this.router.events.pipe(this.angulartics2.filterDeveloperMode(),i.filter((function(t){return t instanceof n.NavigationStart}))).subscribe((function(e){return t.startTimer()})),this.router.events.pipe(i.filter((function(t){return t instanceof n.NavigationError||t instanceof n.NavigationEnd}))).subscribe((function(e){return t.stopTimer()}))},t.prototype.startTimer=function(){this.loadStartTime=Date.now(),this.loadTime=null},t.prototype.stopTimer=function(){this.loadTime=Date.now()-this.loadStartTime,this.loadStartTime=null},t.prototype.pageTrack=function(t){appInsights.trackPageView(this.title.getTitle(),t,this.dimensions,this.metrics,this.loadTime)},t.prototype.eventTrack=function(t,e){appInsights.trackEvent(t,e,this.measurements)},t.prototype.exceptionTrack=function(t){var e=t.event||t.description||t;appInsights.trackException(e)},t.prototype.setUsername=function(t){this.angulartics2.settings.appInsights.userId=t,appInsights.setAuthenticatedUserContext(t)},t.prototype.setUserProperties=function(t){t.userId&&(this.angulartics2.settings.appInsights.userId=t.userId),t.accountId?appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId,t.accountId):appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId)},t.ctorParameters=function(){return[{type:s.Angulartics2},{type:r.Title},{type:n.Router}]},t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(s.Angulartics2),e.ɵɵinject(r.Title),e.ɵɵinject(n.Router))},token:t,providedIn:"root"}),t=function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a}([e.Injectable({providedIn:"root"})],t)}();t.Angulartics2AppInsights=u,t.AppInsightsDefaults=o,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angulartics2-appinsights.umd.min.js.map