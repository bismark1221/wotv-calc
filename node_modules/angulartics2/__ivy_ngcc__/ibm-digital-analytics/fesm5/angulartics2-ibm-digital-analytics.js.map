{"version":3,"file":"angulartics2-ibm-digital-analytics.js","sources":["ng:/angulartics2/ibm-digital-analytics/ibm-digital-analytics.ts","ng:/angulartics2/ibm-digital-analytics/angulartics2-ibm-digital-analytics.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Angulartics2 } from 'angulartics2';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class Angulartics2IBMDigitalAnalytics {\r\n  constructor(private angulartics2: Angulartics2) {\r\n    if (typeof window['cmCreatePageviewTag'] !== 'function') {\r\n      console.warn(\r\n        'Angulartics 2 IBM Digital Analytics Plugin: eluminate.js is not loaded',\r\n      );\r\n    }\r\n  }\r\n\r\n  startTracking(): void {\r\n    this.angulartics2.pageTrack\r\n      .pipe(this.angulartics2.filterDeveloperMode())\r\n      .subscribe(x => this.pageTrack(x.path));\r\n    this.angulartics2.eventTrack\r\n      .pipe(this.angulartics2.filterDeveloperMode())\r\n      .subscribe(x => this.eventTrack(x.action, x.properties));\r\n  }\r\n\r\n  /**\r\n   * Track Page in IBM Digital Analytics\r\n   *\r\n   * @param path location\r\n   *\r\n   * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_pageviewtag.html\r\n   */\r\n  pageTrack(path: string) {\r\n    const cmCreatePageviewTag = window['cmCreatePageviewTag'];\r\n    cmCreatePageviewTag(path, null, null, null);\r\n  }\r\n\r\n  /**\r\n   * Track an event in IBM Digital Analytics\r\n   *\r\n   * @param action A string corresponding to the type of event that needs to be tracked.\r\n   * @param properties The properties that need to be logged with the event.\r\n   */\r\n  eventTrack(action: string, properties: any = {}) {\r\n    const cmDisplayShops = window['cmDisplayShops'];\r\n    switch (action) {\r\n      /**\r\n       * @description The Product View tag captures information about vdigitalDataiews of product detail pages.\r\n       *  The Product View tag should be called on the lowest level detail page for products, which is typically\r\n       *  the Product Details page. You can view example Product View tags below.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_prodviewtag.html\r\n       */\r\n      case 'cmCreateProductviewTag':\r\n        const cmCreateProductviewTag = window['cmCreateProductviewTag'];\r\n        cmCreateProductviewTag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.virtualCategory,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Shop Action 5 tag captures data about selected products and which products are present in a shopping cart,\r\n       *  if any, when the cart is viewed.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_shopact5tag.html\r\n       */\r\n      case 'cmCreateShopAction5Tag':\r\n        const cmCreateShopAction5Tag = window['cmCreateShopAction5Tag'];\r\n        cmCreateShopAction5Tag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.quantity,\r\n          properties.unitPrice,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n          properties.virtualCategory,\r\n        );\r\n\r\n        cmDisplayShops();\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Shop Action 9 tag captures data about what products were purchased by a customer.\r\n       *  Like the Shop Action 5 tag, one tag should be sent for each product line item purchased. These tags should be sent\r\n       *  on the receipt or other completion page confirming a successful order.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_shopact9tag.html\r\n       */\r\n      case 'cmCreateShopAction9Tag':\r\n        const cmCreateShopAction9Tag = window['cmCreateShopAction9Tag'];\r\n        cmCreateShopAction9Tag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.quantity,\r\n          properties.unitPrice,\r\n          properties.registrationId,\r\n          properties.orderId,\r\n          properties.orderSubtotal,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        cmDisplayShops();\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Order tag captures order header information such as Registration ID, order ID, order subtotal,\r\n       *  and shipping and handling. The Order tag should be sent on the receipt page confirming order completion.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_ordertag.html\r\n       */\r\n      case 'cmCreateOrderTag':\r\n        const cmCreateOrderTag = window['cmCreateOrderTag'];\r\n        cmCreateOrderTag(\r\n          properties.orderId,\r\n          properties.orderSubtotal,\r\n          properties.orderShipping,\r\n          properties.registrationId,\r\n          properties.registrantCity,\r\n          properties.registrantState,\r\n          properties.registrantPostalCode,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Registration tag creates a Lifetime Visitor Experience Profile (LIVE Profile) by associating a single\r\n       *  common Registration ID with the IBM® Digital Analytics permanent cookie set in every browser visiting the tagged site.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_registrationtag.html\r\n       */\r\n      case 'cmCreateRegistrationTag':\r\n        const cmCreateRegistrationTag = window['cmCreateRegistrationTag'];\r\n        cmCreateRegistrationTag(\r\n          properties.registrationId,\r\n          properties.registrantEmail,\r\n          properties.registrantCity,\r\n          properties.registrantState,\r\n          properties.registrantPostalCode,\r\n          properties.registrantCountry,\r\n          properties.attrbute,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Element tag is used to track intra-page content in IBM® Digital Analytics. Data collected by\r\n       *  the Element tag is used to populate values in the Element Categories and Top Viewed Elements reports.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_elementtag.html\r\n       */\r\n      case 'cmCreateElementTag':\r\n        const cmCreateElementTag = window['cmCreateElementTag'];\r\n        cmCreateElementTag(\r\n          properties.elementId,\r\n          properties.elementCategory,\r\n          properties.attrbute,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Conversion Event tag is employed for tracking of general non-commerce conversion events.\r\n       * The Conversion Event tag is used to populate values in the Conversion Events Reports and to create Key Segments.\r\n       * This tag and the reports it populates enable analysis of a wide variety of site activities.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_conversioneventtag.html\r\n       */\r\n      case 'cmCreateConversionEventTag':\r\n        const cmCreateConversionEventTag = window['cmCreateConversionEventTag'];\r\n        cmCreateConversionEventTag(\r\n          properties.eventId,\r\n          properties.actionType,\r\n          properties.eventCategoryId,\r\n          properties.points,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        break;\r\n\r\n      default:\r\n        console.warn('Unsupported Event Action');\r\n    }\r\n  }\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './ibm-digital-analytics';\n"]}