<div class="row chainParameters" *ngFor="let i of [0,1]">
  <div class="row form-group unit" *ngIf="i === 0 || chain[i - 1]">
    <div class="selectLeftZone">
      <label for="chain{{i}}">Unit {{ i + 1 }}</label>
      <select class="form-control" id="chain{{i}}" [(ngModel)]="selectedUnits[i]" (ngModelChange)="onChangeUnit(i)">
        <option selected>Unit {{ i + 1 }}</option>
        <option *ngFor="let unit of units" [ngValue]="unit">{{unit.name}}</option>
      </select>
      <img src='assets/units/{{ chain[i].id }}.png' *ngIf="chain[i]" />
    </div>

    <div class="selectRightZone" *ngIf="chain[i]">
      <div class="selectRightZoneTop">
        <div class="selectRightZoneTopElement">
          <label for="chainer{{i}}_dual">Dualcast/Dualwield</label>
          <select class="form-control" id="chainer{{i}}_dual" [(ngModel)]="chain[i].dual" (ngModelChange)="onChangeChain()">
            <option [ngValue]="true">Yes</option>
            <option [ngValue]="false">No</option>
          </select>
        </div>

        <div class="selectRightZoneTopElement">
          <label for="chainer{{i}}_weapon1">Element weapon 1</label>
          <select class="form-control" id="chainer{{i}}_weapon1" [(ngModel)]="chain[i].weapons[0]" (ngModelChange)="onChangeChain()">
            <option *ngFor="let element of elements" [ngValue]="element.type">{{element.type}}</option>
          </select>
        </div>

        <div class="selectRightZoneTopElement" *ngIf="chain[i].dual">
          <label for="chainer{{i}}_weapon2">Element weapon 2</label>
          <select class="form-control" id="chainer{{i}}_weapon2" [(ngModel)]="chain[i].weapons[1]" (ngModelChange)="onChangeChain()">
            <option *ngFor="let element of elements" [ngValue]="element.type">{{element.type}}</option>
          </select>
        </div>
      </div>

      <div class="selectRightZoneMiddle">
        <div class="selectRightZoneMiddleElement">
          <label for="chainer{{i}}_ability">Ability</label>
          <select class="form-control" id="chainer{{i}}_ability" [(ngModel)]="chain[i].ability" (ngModelChange)="onChangeChain()">
            <option *ngFor="let ability of chain[i].abilities" [ngValue]="ability">{{ability.name}}</option>
          </select>
        </div>

        <div class="selectRightZoneMiddleElement">
          <label for="chainer{{i}}_base">Base %</label>
          <input class="form-control" type="number" id="chainer{{i}}_base" [(ngModel)]="chain[i].ability.base" (ngModelChange)="onChangeChain()">
        </div>

        <div class="selectRightZoneMiddleElement">
          <label for="chainer{{i}}_ignore">Ignore (Def/Spr)</label>
          <input class="form-control" type="number" id="chainer{{i}}_ignore" [(ngModel)]="chain[i].ability.ignore" (ngModelChange)="onChangeChain()">
        </div>
      </div>

      <div *ngFor="let element of chain[i].ability.elements; let j = index" class="selectRightZoneBottom">
        <div class="selectRightZoneBottomElement">
          <label for="unit{{i}}_element{{j}}">Element 1</label>
          <select class="form-control" id="unit{{i}}_element{{j}}" [(ngModel)]="chain[i].ability.elements[j]" (ngModelChange)="onChangeChain()">
            <option *ngFor="let element of chain[i].ability.elements" [ngValue]="element">{{element.type}}</option>
          </select>
        </div>
        <div class="selectRightZoneBottomElement">
          <label for="unit{{i}}_element{{j}}_debuff">Debuff</label>
          <input class="form-control" type="number" id="unit{{i}}_element{{j}}_debuff" [(ngModel)]="chain[i].ability.elements[j].debuff" (ngModelChange)="onChangeChain()">
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <label for="framesGap">Spark ?</label>
  <select class="form-control" id="framesGap" [(ngModel)]="framesGap" (ngModelChange)="onChangeChain()">
    <option value="0">Oui</option>
    <option value="1">Non</option>
  </select>
</div>

<h2>{{chainService.getResult()}}</h2>


<app-chain-chart></app-chain-chart>
