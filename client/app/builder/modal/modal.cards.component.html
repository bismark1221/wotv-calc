<div *ngIf="modalStep == 'select'">
  <div class="titleBlock">
    <div class="title">
      CARDS
    </div>
    <div class="closeButton">
      <button type="button" class="close" aria-label="Close" (click)="close()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </div>

  <div class="cards">
    <div class="upperBlock">
      <div class="searchBlock">
        <i class="fas fa-search" aria-hidden="true"></i>
        <input class="searchInput" type="text" placeholder="Search for an card by name" [(ngModel)]="searchText">
      </div>
      <div class="filtersBlock">
        Filter by :
        <button *ngFor="let rarity of ['UR', 'MR', 'SR', 'R', 'N']" class="btn-filter" [ngClass]="{'btn-filter-selected': isFilterSelected('rarity', rarity)}" (click)="filterList('rarity', rarity)">
          <img class="filterRarity" src="assets/rarity/{{rarity}}.png" />
        </button>
      </div>
    </div>

    <hr class="separator" />

    <div class="cardsList">
      <div class="cardsCol" *ngFor="let card of getFilteredCards()">
        <a (click)="selectCard(card)">
          <div class="cardIcons">
            <img class="rarityImg" src="{{'assets/rarity/' + card.rarity + '.png'}}" />
          </div>
          <div>
            <img class="cardImg" src="assets/cards/{{ card.image }}_m.png" />
          </div>
          <div class="cardTitle">
            <span class="cardName">{{ card.name }}</span>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>

<div *ngIf="modalStep == 'saved'">
  <div class="titleBlock">
    <div class="title">
      Load card ?
    </div>
    <div class="closeButton">
      <button type="button" class="close" aria-label="Close" (click)="close()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </div>
</div>

<div *ngIf="modalStep == 'custom'">
  <div class="titleBlock">
    <div class="title">
      {{ card.name }} - Custom
    </div>
    <div class="closeButton">
      <button type="button" class="close" aria-label="Close" (click)="close()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </div>

  <div class="backButtonDiv">
    <button class="btn btn-sub" (click)="back()"><i class="fas fa-long-arrow-left" aria-hidden="true"></i>Back to Cards</button>
  </div>

  <div class="customDiv">
    <div class="leftBlock">
      <div class="cardsCol">
        <div class="cardIcons">
          <img class="rarityImg" src="{{'assets/rarity/' + card.rarity + '.png'}}" />
          <img class="elementImg" src="{{'assets/elements/' + card.element + '.png'}}" *ngIf="card.element" />
        </div>
        <div>
          <img class="cardImg" src="assets/units/{{ card.image }}_s.png" />
        </div>
        <div class="cardTitle">
          <span class="cardName">{{ card.name }}</span>
        </div>
      </div>

      <div class="starLevelDiv">
        <div>
          <ngb-rating [(rate)]="card.star" [max]="4">
            <ng-template let-fill="fill" let-index="index">
              <div class="star" [class.filled]="fill === 100"  (click)="changeStar(index + 1)">&nbsp;</div>
            </ng-template>
          </ngb-rating>
        </div>

        <div>
          <div class="titleSelect">
            Level
          </div>
          <div ngbDropdown class="dropdownDiv">
            <button class="btn btn-select" ngbDropdownToggle>{{ card.level }}</button>
            <div ngbDropdownMenu class="selectList">
              <button *ngFor="let level of card.tableLevels" class="selectLevel" ngbDropdownItem (click)="selectLevel(level)">{{ level }}</button>
            </div> / {{ card.maxLevel }}
          </div>
        </div>
      </div>

      <button class="btn btn-sub btn-card" (click)="maxCard()">Max Card</button>
      <button class="btn btn-main btn-card" (click)="save()">SAVE</button>
    </div>

    <div class="rightBlock">
      <table class="statsTable">
        <tbody>
          <tr>
            <th colspan="10">Stats</th>
          </tr>
          <tr>
            <th class="sub" *ngFor="let type of card.statsType">{{ type }}</th>
          </tr>
          <tr>
            <td *ngFor="let type of card.statsType">
              {{ card.stats[type].total }}
            </td>
          </tr>
        </tbody>
      </table>

      <table class="statsTable">
        <tbody>
          <tr>
            <th colspan="10">Unit Buff</th>
          </tr>
          <tr>
            <td colspan="10">
              <div *ngFor="let buff of card.buff.self">{{ buff }}</div>
            </td>
          </tr>
        </tbody>
      </table>

      <table class="statsTable">
        <tbody>
          <tr>
            <th colspan="10">Party Buff</th>
          </tr>
          <tr>
            <td colspan="10">
              <div *ngFor="let buff of card.buff.party">{{ buff }}</div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
