<nav class="navbar navbar-toggleable-md main fixed-top mainNav">
  <a class="navbar-brand logoLinkDesktop" [routerLink]="[getRoute('/')]">
    <img src="assets/nav/WOTVCALC_LOGO_WHITE.png" class="logo_desktop"/>
  </a>

  <div class="centerNav">
    <ul class="nav navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" [routerLink]="[getRoute('/units')]" (mouseover)="showBuilderNav=false; showOtherNav=false" [ngClass]="{'active': inUnit}">
          UNITS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/cards')]" (mouseover)="showBuilderNav=false; showOtherNav=false" [ngClass]="{'active': inCard}">
          VISION CARDS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/espers')]" (mouseover)="showBuilderNav=false; showOtherNav=false" [ngClass]="{'active': inEsper}">
          ESPERS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/equipments')]" (mouseover)="showBuilderNav=false; showOtherNav=false" [ngClass]="{'active': inEquipment}">
          EQUIPMENT
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/quests')]" (mouseover)="showBuilderNav=false; showOtherNav=false" [ngClass]="{'active': inQuest}">
          QUESTS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/raids')]" (mouseover)="showBuilderNav=false; showOtherNav=false" [ngClass]="{'active': inRaid}">
          RAIDS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/builder')]" (mouseover)="showBuilderNav=true; showOtherNav=false" [ngClass]="{'active': inBuilder}">
          BUILDER
        </a>
        <div class="inlineBlock otherBlock" (mouseleave)="showOtherNav=false" (mouseover)="showBuilderNav=false; showOtherNav=true">
          <a class="nav-link" [ngClass]="{'active': inOther || showOtherNav}">
            OTHER
          </a>
          <div class="otherIndex" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/index')]" (click)="showOtherNav=false">Index</a>
          </div>
          <div class="otherBestiary" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/bestiary')]" (click)="showOtherNav=false">Bestiary</a>
          </div>
          <div class="otherTitles" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/titles')]" (click)="showOtherNav=false">Titles</a>
          </div>
          <div class="otherJobPlanner" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/jobplanner')]" (click)="showOtherNav=false">Job Planner</a>
          </div>
          <div class="otherFarmCalculator" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/farm-calculator')]" (click)="showOtherNav=false">Farm Calculator</a>
          </div>
          <div class="otherMaterialLookup" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/material-lookup')]" (click)="showOtherNav=false">Material Lookup</a>
          </div>
          <div class="otherMateria" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/materia')]" (click)="showOtherNav=false">Materia</a>
          </div>
          <div class="otherSubCardRatio" *ngIf="showOtherNav">
            <a [routerLink]="[getRoute('/other/subcard-ratio')]" (click)="showOtherNav=false">Sub Cards Ratio</a>
          </div>
        </div>
        <div class="inlineBlock" (mouseover)="showBuilderNav=false; showOtherNav=false">&nbsp;</div>
      </li>
    </ul>
  </div>

  <div class="userBlock">
    <button *ngIf="!user" class="btn btn-main btn-login" (click)="openLoginModal()">LOGIN</button>
    <div  (mouseover)="showUserMenu=true" (mouseleave)="showUserMenu=false">
      <i *ngIf="user" class="fas fa-user-circle" aria-hidden="true"></i>
      <div class="userMenuBlock">
        <div class="userMenuDiv" *ngIf="showUserMenu" >
          <a [routerLink]="[getRoute('/inventory')]" (click)="showUserMenu=false">Inventory</a>
        </div>
        <div class="userMenuDiv" *ngIf="showUserMenu" >
          <a [routerLink]="[getRoute('/user')]" (click)="showUserMenu=false">Inventory Importer</a>
        </div>
        <div class="userMenuDiv" *ngIf="showUserMenu" >
          <a (click)="logout(); showUserMenu=false">Logout</a>
        </div>
      </div>
    </div>
  </div>

  <div class="lang" (mouseover)="showLangSelector=true" (mouseleave)="showLangSelector=false">
    <div class="actualLang">
      <div *ngIf="lang === 'fr'">
        <img src="assets/nav/blank.gif" class="flag flag-fr" /> FR
      </div>
      <div *ngIf="lang === 'en'">
        <img src="assets/nav/blank.gif" class="flag flag-gb" /> EN
      </div>
      <div *ngIf="lang === 'de'">
        <img src="assets/nav/blank.gif" class="flag flag-de" /> DE
      </div>
      <div *ngIf="lang === 'es'">
        <img src="assets/nav/blank.gif" class="flag flag-es" /> ES
      </div>
      <div *ngIf="lang === 'ko'">
        <img src="assets/nav/blank.gif" class="flag flag-kr" /> KO
      </div>
      <div *ngIf="lang === 'zh'">
        <img src="assets/nav/blank.gif" class="flag flag-tw" /> ZH
      </div>
    </div>
    <div class="otherLang" *ngIf="showLangSelector">
      <div class="otherLangIndividual" *ngIf="lang !== 'fr'" >
        <a class="pointer" (click)="changeLang('fr')">
          <img src="assets/nav/blank.gif" class="flag flag-fr" /> FR
        </a>
      </div>
      <div class="otherLangIndividual" *ngIf="lang !== 'en'">
        <a class="pointer" (click)="changeLang('en')">
          <img src="assets/nav/blank.gif" class="flag flag-gb" /> EN
        </a>
      </div>
      <div class="otherLangIndividual" *ngIf="lang !== 'de'">
        <a class="pointer" (click)="changeLang('de')">
          <img src="assets/nav/blank.gif" class="flag flag-de" /> DE
        </a>
      </div>
      <div class="otherLangIndividual" *ngIf="lang !== 'es'">
        <a class="pointer" (click)="changeLang('es')">
          <img src="assets/nav/blank.gif" class="flag flag-es" /> ES
        </a>
      </div>
      <div class="otherLangIndividual" *ngIf="lang !== 'ko'">
        <a class="pointer" (click)="changeLang('ko')">
          <img src="assets/nav/blank.gif" class="flag flag-kr" /> KO
        </a>
      </div>
      <div class="otherLangIndividual" *ngIf="lang !== 'zh'">
        <a class="pointer" (click)="changeLang('zh')">
          <img src="assets/nav/blank.gif" class="flag flag-tw" /> ZH
        </a>
      </div>
    </div>
  </div>

  <img src="assets/nav/split.png" class="split"/>

  <div class="versions" (mouseover)="showVersionSelector=true" (mouseleave)="showVersionSelector=false">
    <div class="actualVersion">
      {{ version === 'GL' ? 'Global' : 'Japan' }}
    </div>
    <div class="otherVersion" *ngIf="version !== 'GL' && showVersionSelector" >
      <a (click)="changeVersion('GL')">Global</a>
    </div>
    <div class="otherVersion" *ngIf="version !== 'JP' && showVersionSelector">
      <a (click)="changeVersion('JP')">Japan</a>
    </div>
  </div>

  <div class="them">
    <ui-switch class="switchTheme" (click)="toggleTheme()" checkedLabel="on" uncheckedLabel="off" [checked]="theme === 'light'"></ui-switch>
  </div>
</nav>

<nav class="navbar sub navbar-toggleable-md navbar-dark bg-dark fixed-top navBuilder" (mouseleave)="showBuilderNav=false; showOtherNav=false" *ngIf="showBuilderNav || inBuilder">
  <div class="centerNav">
    <ul class="nav navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" [routerLink]="[getRoute('/builder/team')]" [routerLinkActive]="['active']">TEAM</a>
        <a class="nav-link" [routerLink]="[getRoute('/builder/unit')]" [routerLinkActive]="['active']">UNITS</a>
        <a class="nav-link" [routerLink]="[getRoute('/builder/card')]" [routerLinkActive]="['active']">VISION CARDS</a>
        <a class="nav-link" [routerLink]="[getRoute('/builder/esper')]" [routerLinkActive]="['active']">ESPERS</a>
        <a class="nav-link" [routerLink]="[getRoute('/builder/equipment')]" [routerLinkActive]="['active']">EQUIPMENT</a>
        <a class="nav-link" [routerLink]="[getRoute('/builder/materia')]" [routerLinkActive]="['active']">MATERIA</a>
        <a class="nav-link" [routerLink]="[getRoute('/builder/guild')]" [routerLinkActive]="['active']">GUILD</a>
        <a class="nav-link" [routerLink]="[getRoute('/builder/master-ranks')]" [routerLinkActive]="['active']">MASTER RANKS</a>
      </li>
    </ul>
  </div>
</nav>

<nav class="navbar navbar-toggleable-md main fixed-top mobileNav">
  <a class="navbar-brand" [routerLink]="[getRoute('/')]" (click)="toggleMobileMenu(true)">
    <img src="assets/nav/WOTVCALC_LOGO_WHITE.png" class="logo_mobile" />
  </a>

  <div class="centerNav mobileLinks" [ngClass]="{'showMobileMenu': displayMobileMenu === true}">
    <ul class="nav navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" [routerLink]="[getRoute('/units')]" [ngClass]="{'active': inUnit}" (click)="toggleMobileMenu(true)">
          UNITS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/cards')]" [ngClass]="{'active': inCard}" (click)="toggleMobileMenu(true)">
          VISION CARDS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/espers')]" [ngClass]="{'active': inEsper}" (click)="toggleMobileMenu(true)">
          ESPERS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/equipments')]" [ngClass]="{'active': inEquipment}" (click)="toggleMobileMenu(true)">
          EQUIPMENT
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/quests')]" [ngClass]="{'active': inQuest}" (click)="toggleMobileMenu(true)">
          QUESTS
        </a>
        <a class="nav-link" [routerLink]="[getRoute('/raids')]" [ngClass]="{'active': inRaid}" (click)="toggleMobileMenu(true)">
          RAIDS
        </a>

        <a class="nav-link" [ngClass]="{'active': inBuilder}" (click)="showMobileBuilderNav = !showMobileBuilderNav" [attr.aria-expanded]="!showMobileBuilderNav">
          BUILDER
          <i class="fas fa-chevron-up" *ngIf="showMobileBuilderNav" aria-hidden="true"></i>
          <i class="fas fa-chevron-down" *ngIf="!showMobileBuilderNav" aria-hidden="true"></i>
        </a>
        <div class="subLinksMobile" [ngbCollapse]="!showMobileBuilderNav">
          <a class="nav-link" [routerLink]="[getRoute('/builder/team')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            TEAM
          </a>
          <a class="nav-link" [routerLink]="[getRoute('/builder/unit')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            UNITS
          </a>
          <a class="nav-link" [routerLink]="[getRoute('/builder/card')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            VISION CARDS
          </a>
          <a class="nav-link" [routerLink]="[getRoute('/builder/esper')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            ESPERS
          </a>
          <a class="nav-link" [routerLink]="[getRoute('/builder/equipment')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            EQUIPMENT
          </a>
          <a class="nav-link" [routerLink]="[getRoute('/builder/materia')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            MATERIA
          </a>
          <a class="nav-link" [routerLink]="[getRoute('/builder/guild')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            GUILD
          </a>
          <a class="nav-link" [routerLink]="[getRoute('/builder/master-ranks')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">
            MASTER RANKS
          </a>
        </div>

        <a class="nav-link" [ngClass]="{'active': inOther}"(click)="showMobileOtherNav = !showMobileOtherNav" [attr.aria-expanded]="!showMobileOtherNav">
          OTHER
          <i class="fas fa-chevron-up" *ngIf="showMobileOtherNav" aria-hidden="true"></i>
          <i class="fas fa-chevron-down" *ngIf="!showMobileOtherNav" aria-hidden="true"></i>
        </a>
        <div class="subLinksMobile" [ngbCollapse]="!showMobileOtherNav">
          <a class="nav-link" [routerLink]="[getRoute('/other/index')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Index</a>
          <a class="nav-link" [routerLink]="[getRoute('/other/bestiary')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Bestiary</a>
          <a class="nav-link" [routerLink]="[getRoute('/other/titles')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Titles</a>
          <a class="nav-link" [routerLink]="[getRoute('/other/jobplanner')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Job Planner</a>
          <a class="nav-link" [routerLink]="[getRoute('/other/farm-calculator')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Farm Calculator</a>
          <a class="nav-link" [routerLink]="[getRoute('/other/material-lookup')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Material Lookup</a>
          <a class="nav-link" [routerLink]="[getRoute('/other/materia')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Materia</a>
          <a class="nav-link" [routerLink]="[getRoute('/other/subcard-ratio')]" [routerLinkActive]="['active']" (click)="toggleMobileMenu(true)">Sub Cards Ratio</a>
        </div>

        <div class="nav-link">
          <a class="mobileVersionLink" (click)="changeVersion('GL'); toggleMobileMenu(true);">Global</a> <img src="assets/nav/split.png" class="split"/> <a class="mobileVersionLink" (click)="changeVersion('JP'); toggleMobileMenu(true);">Japan</a>
        </div>

        <div class="nav-link">
          <ui-switch class="switchTheme" (click)="toggleTheme(); toggleMobileMenu(true);" checkedLabel="on" uncheckedLabel="off" [checked]="theme === 'light'"></ui-switch>
        </div>

        <div class="nav-link">
          <button *ngIf="!user" class="btn btn-main btn-login" (click)="openLoginModal(); toggleMobileMenu(true);">LOGIN</button>
          <a class="nav-link" [routerLink]="[getRoute('/inventory')]" (click)="toggleMobileMenu(true)">Inventory</a>
          <a class="nav-link" [routerLink]="[getRoute('/user')]" (click)="toggleMobileMenu(true)">Inventory Importer</a>
          <button *ngIf="user" class="btn btn-sub btn-logout" (click)="logout(); toggleMobileMenu(true);">LOGOUT</button>
        </div>
      </li>
    </ul>
  </div>

  <div class="btnMenuMobile">
    <button type="button" class="btn btn-secondary btnMenu" (click)="toggleMobileMenu()">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </button>
  </div>
</nav>
